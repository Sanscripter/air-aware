# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Release
'on':
  push:
    branches:
      - master
jobs:

  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: echo ${{secrets}}
      - run: echo ${{vars}}
      # - run: npm i && npm run test && npm run build
      - name: Dump env context
        env:
          GOOGLE_MAPS_API_KEY: ${{ secrets.GOOGLE_MAPS_API_KEY }}
          ENTITY_SQUARE_SIZE_DEGREES: ${{ vars.ENTITY_SQUARE_SIZE_DEGREES }}
          POLYLINE_WIDTH: ${{ vars.POLYLINE_WIDTH }}
          CAMERA_DISTANCE: ${{ vars.CAMERA_DISTANCE }}
          CAMERA_HEIGHT_OFFSET: ${{ vars.CAMERA_HEIGHT_OFFSET }}
          CAMERA_PITCH_DEGREES: ${{ vars.CAMERA_PITCH_DEGREES }}
          CAMERA_HEADING_DEGREES: ${{ vars.CAMERA_HEADING_DEGREES }}
          FLY_ANIMATION_DURATION_SECONDS: ${{ vars.FLY_ANIMATION_DURATION_SECONDS }}
          CAMERA_ANIMATION_RANGE_RIGHT: ${{ vars.CAMERA_ANIMATION_RANGE_RIGHT }}
          CAMERA_ANIMATION_RANGE_LEFT: ${{ vars.CAMERA_ANIMATION_RANGE_LEFT }}
          CAMERA_ANIMATION_RANGE_UP: ${{ vars.CAMERA_ANIMATION_RANGE_UP }}
          CAMERA_ANIMATION_RANGE_DOWN: ${{ vars.CAMERA_ANIMATION_RANGE_DOWN }}
          CLOUD_HEIGHT: ${{ vars.CLOUD_HEIGHT }}
          ENV_CONTEXT: ${{ toJson(env) }}
        run: echo "$ENV_CONTEXT"
      - uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          repoToken: '${{ secrets.GITHUB_TOKEN }}'
          firebaseServiceAccount: '${{ secrets.FIREBASE_SERVICE_ACCOUNT_PROJECT_DEPOSITORY }}'
          channelId: live
          projectId: project-depository
